"use strict";(self.webpackChunkinventario=self.webpackChunkinventario||[]).push([[872],{2653:(_,p,e)=>{e.d(p,{M:()=>d});class d{constructor(){this.id_empresa=0,this.modulo="",this.assinatura="",this.id_usuario=0,this.parametro="",this.user_insert=0,this.user_update=0}load(s){this.id_empresa=s.id_empresa,this.modulo=s.modulo,this.assinatura=s.assinatura,this.id_usuario=s.id_usuario,this.parametro=s.parametro,this.user_insert=s.user_insert,this.user_update=s.user_update}getParametro(){try{return JSON.parse(this.parametro)}catch(s){return JSON.parse('{"mensagem":"error"}')}}setParametro(s){this.parametro=JSON.stringify(s)}}},6872:(_,p,e)=>{e.r(p),e.d(p,{PadraoCadastroModule:()=>oa});var d=e(8583),h=e(4655),s=e(2653),f=e(3032),u=e(3430),a=e(7716),n=e(3317),P=e(454),C=e(789),v=e(2238),x=e(9617),N=e(8656),O=e(4838),M=e(7360),b=e(6809),D=e(5062),F=e(5330),A=e(8002),S=e(5435),T=e(4395),E=e(7519),g=e(3679),I=e(5626),L=e(9219),U=e(1095),y=e(1436),R=e(6627),Z=e(8295),w=e(7441),V=e(9983),H=e(2458);function J(i,l){if(1&i){const t=a.EpF();a.TgZ(0,"button",7),a.NdJ("click",function(){return a.CHM(t),a.oxw().onGetExcelToEmailOrDownLoad("e-mail")}),a.TgZ(1,"mat-icon"),a._uU(2,"email"),a.qZA(),a.qZA()}}function B(i,l){if(1&i){const t=a.EpF();a.TgZ(0,"button",8),a.NdJ("click",function(){return a.CHM(t),a.oxw().onGetExcelToEmailOrDownLoad("download")}),a.TgZ(1,"mat-icon"),a._uU(2,"cloud_download"),a.qZA(),a.qZA()}}function Y(i,l){if(1&i&&(a.TgZ(0,"mat-option",19),a._uU(1),a.qZA()),2&i){const t=l.$implicit;a.Q6J("value",t.sigla),a.xp6(1),a.hij(" ",t.descricao," ")}}function $(i,l){if(1&i){const t=a.EpF();a.TgZ(0,"button",20),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).clearValue("codigo")}),a.TgZ(1,"mat-icon"),a._uU(2,"close"),a.qZA(),a.qZA()}}function G(i,l){if(1&i){const t=a.EpF();a.TgZ(0,"button",20),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).clearValue("apelido")}),a.TgZ(1,"mat-icon"),a._uU(2,"close"),a.qZA(),a.qZA()}}function j(i,l){if(1&i){const t=a.EpF();a.TgZ(0,"button",20),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).clearValue("descricao")}),a.TgZ(1,"mat-icon"),a._uU(2,"close"),a.qZA(),a.qZA()}}function k(i,l){if(1&i){const t=a.EpF();a.TgZ(0,"form",9),a.TgZ(1,"div",10),a.TgZ(2,"mat-form-field",11),a.TgZ(3,"mat-label"),a._uU(4,"Ordernado Por"),a.qZA(),a.TgZ(5,"mat-select",12),a.NdJ("selectionChange",function(){return a.CHM(t),a.oxw().onChangeParametros()}),a.YNc(6,Y,2,2,"mat-option",13),a.qZA(),a.qZA(),a.TgZ(7,"mat-form-field",14),a.TgZ(8,"mat-label"),a._uU(9,"C\xf3digo"),a.qZA(),a._UZ(10,"input",15),a.YNc(11,$,3,0,"button",16),a.qZA(),a.qZA(),a.TgZ(12,"div",17),a.TgZ(13,"mat-form-field",14),a.TgZ(14,"mat-label"),a._uU(15,"Apelido"),a.qZA(),a._UZ(16,"input",18),a.YNc(17,G,3,0,"button",16),a.qZA(),a.qZA(),a.TgZ(18,"div",17),a.TgZ(19,"mat-form-field",14),a.TgZ(20,"mat-label"),a._uU(21,"Descri\xe7\xe3o"),a.qZA(),a._UZ(22,"input",18),a.YNc(23,j,3,0,"button",16),a.qZA(),a.qZA(),a.qZA()}if(2&i){const t=a.oxw();a.Q6J("formGroup",t.parametros),a.xp6(6),a.Q6J("ngForOf",t.orderby),a.xp6(5),a.Q6J("ngIf",t.hasValue("codigo")),a.xp6(6),a.Q6J("ngIf",t.hasValue("apelido")),a.xp6(6),a.Q6J("ngIf",t.hasValue("descricao"))}}let Q=(()=>{class i{constructor(t,o,r,m,c,ea,ia,ra){this.formBuilder=t,this.globalService=o,this.localStorageService=r,this.parametrosService=m,this.emailService=c,this.appSnackBar=ea,this.EmailDialog=ia,this.DownLoadDialog=ra,this.paramName="teste",this.retorno=!1,this.email=!1,this.download=!1,this.controle_paginas=new u.e(50,0),this.hide=!0,this.change=new a.vpe,this.changeHide=new a.vpe,this.showFiltro=!0,this.executores=[],this.hideAcao="Ocultar",this.orderby=[{sigla:"001",descricao:"Codigo"},{sigla:"002",descricao:"Apelido"},{sigla:"003",descricao:"Descri\xe7\xe3o"}],this.parametro=new s.M,this.enable_filter=!0,this.parametros=t.group({orderby:[{value:""}],codigo:[{value:""}],apelido:[{value:""}],descricao:[{value:""}]}),this.setHide(),this.setValuesNoParam()}ngOnInit(){var t,o,r;this.localStorageService.getParametroModel(this.paramName),null===(t=this.parametros.get("codigo"))||void 0===t||t.valueChanges.pipe((0,A.U)(c=>c.trim()),(0,S.h)(c=>c.length>0),(0,T.b)(350),(0,E.x)()).subscribe(c=>this.onChangeParametros()),null===(o=this.parametros.get("apelido"))||void 0===o||o.valueChanges.pipe((0,A.U)(c=>c.trim().toUpperCase()),(0,S.h)(c=>c.length>0),(0,T.b)(350),(0,E.x)()).subscribe(c=>{this.onChangeParametros()}),null===(r=this.parametros.get("descricao"))||void 0===r||r.valueChanges.pipe((0,A.U)(c=>c.trim().toUpperCase()),(0,S.h)(c=>c.length>0),(0,T.b)(350),(0,E.x)()).subscribe(c=>{this.onChangeParametros()})}ngOnDestroy(){var t,o,r;null===(t=this.inscricaoParametro)||void 0===t||t.unsubscribe(),null===(o=this.inscricaoExcel)||void 0===o||o.unsubscribe(),null===(r=this.inscricaoEmail)||void 0===r||r.unsubscribe()}onGetExcelToEmailOrDownLoad(t){"E-MAIL"==t.toUpperCase()?this.openEmailDialog():this.openDownLoadDialog()}sendMail(t){let o=new F.D;o.id_empresa=this.globalService.getIdEmpresa(),o.id_filial=this.globalService.getLocal().id,o.id_inventario=this.globalService.getInventario().codigo,o.assunto="Relat\xf3rio Dos Ativos Do Invent\xe1rio",o.destinatario=this.globalService.usuario.email,o.mensagem="Mensagem enviada automaticamento por solicita\xe7\xe3o do usu\xe1rio. Favor Verificar Anexo.",o.fileName=t,this.globalService.setSpin(!0),this.inscricaoEmail=this.emailService.sendEmailV2(o).subscribe(r=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar("E-Mail Enviado Com Sucesso!","OK")},r=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Produtos De Invent\xe1rio ${(0,b.bZ)(r)}`,"OK")})}setValues(){var t;this.enable_filter=!1,this.parametros.setValue({orderby:(0,b.SL)(this.parametro.getParametro(),"orderby"),codigo:null===(t=(0,b.P0)(this.parametro.getParametro(),"codigo"))||void 0===t?void 0:t.toString(),apelido:(0,b.SL)(this.parametro.getParametro(),"apelido"),descricao:(0,b.SL)(this.parametro.getParametro(),"descricao")}),this.enable_filter=!0}setValuesNoParam(){this.enable_filter=!1,this.parametros.setValue({orderby:"",codigo:"",apelido:"",descricao:""}),this.enable_filter=!0}setHide(){this.hide=!this.hide,this.hideAcao=this.hide?"Mostrar":"Ocultar"}loadParametros(){this.parametro=new s.M,this.parametro.id_empresa=this.globalService.getIdEmpresa(),this.parametro.modulo=this.paramName,this.parametro.assinatura="V1.00 31/10/24 A",this.parametro.id_usuario=this.globalService.usuario.id,this.parametro.parametro='\n         {\n           "codigo":0,\n           "apelido": "",\n           "descricao": "",\n           "orderby":"001",\n           "page": 1,\n           "new": false,\n           "id_retorno":0\n         }';const t=this.localStorageService.getParametroModel(this.paramName);null!==t?(this.parametro.load(t),this.setValues()):this.getParametro()}getParametro(){this.globalService.setSpin(!0);let t=new D.E;t.id_empresa=this.parametro.id_empresa,t.modulo=this.parametro.modulo,t.assinatura=this.parametro.assinatura,t.id_usuario=this.parametro.id_usuario,t.orderby="Usu\xe1rio",console.log("pesquisa",t),this.inscricaoParametro=this.parametrosService.getParametrosParametro01(t).subscribe(o=>{this.globalService.setSpin(!1),this.parametro=new s.M,this.parametro.id_empresa=o[0].id_empresa,this.parametro.modulo=o[0].modulo,this.parametro.id_usuario=o[0].id_usuario,this.parametro.assinatura=o[0].assinatura,this.parametro.parametro=o[0].parametro,this.parametro.user_insert=o[0].user_insert,this.parametro.user_update=o[0].user_update,this.setValues(),this.onChangeParametros(!1)},o=>{this.globalService.setSpin(!1),this.setValuesNoParam(),this.onChangeParametros()})}updateParametros(){this.globalService.setSpin(!0),this.parametro.user_insert=this.globalService.usuario.id,this.parametro.user_update=this.globalService.usuario.id,this.refreshParametro(),this.inscricaoParametro=this.parametrosService.ParametroAtualiza(this.parametro).subscribe(t=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar("Par\xe2metros Atualizados","OK")},t=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Grava\xe7\xe3o Dos Parametros ${(0,b.bZ)(t)}`,"OK")})}refreshParametro(t=!0){let o=this.parametro.getParametro();Object(o).codigo=this.parametros.value.codigo,Object(o).apelido=this.parametros.value.apelido.toUpperCase(),Object(o).descricao=this.parametros.value.descricao.toUpperCase(),Object(o).orderby=this.parametros.value.orderby,this.parametro.parametro=JSON.stringify(o)}onChangeParametros(t=!0){this.refreshParametro(t),this.enable_filter&&this.change.emit(this.parametro)}onSaveConfig(){this.updateParametros()}onHide(){this.setHide(),this.changeHide.emit(this.hide)}hasValue(t){var o;return""!=(null===(o=this.parametros.get(t))||void 0===o?void 0:o.value)}clearValue(t){"descricao"==t&&this.parametros.patchValue({descricao:""}),"apelido"==t&&this.parametros.patchValue({descricao:""}),"codigo"==t&&this.parametros.patchValue({codigo:""}),this.onChangeParametros()}ChangeValue(t,o){"descricao"==t&&this.parametros.patchValue({descricao:o}),"apelido"==t&&this.parametros.patchValue({descricao:o})}openEmailDialog(){const t=new M.o;t.titulo="ENVIAR CONSULTA VIA E-MAIL",t.destinatario=this.globalService.usuario.email,t.escopo="T",t.labelBottomNao="Cancelar",t.labelBottonSim="Processar",t.id_empresa=this.globalService.empresa.id,t.id_filial=this.globalService.local.id,t.id_inventario=this.globalService.inventario.codigo,t.pagina=this.controle_paginas.getPaginalAtual(),t.parametro=this.parametro;const o=new v.vA;o.disableClose=!0,o.id="consulta-email",o.width="800px",o.data=t,this.EmailDialog.open(O.G,o).beforeClosed().subscribe(m=>{})}openDownLoadDialog(){console.log("Pagina: ",this.controle_paginas.getPaginalAtual());const t=new N.d;t.titulo="DOWNLOAD DE CONSULTA",t.escopo="T",t.labelBottomNao="Cancelar",t.labelBottonSim="Processar",t.id_empresa=this.globalService.empresa.id,t.id_filial=this.globalService.local.id,t.id_inventario=this.globalService.inventario.codigo,t.pagina=this.controle_paginas.getPaginalAtual(),t.parametro=this.parametro;const o=new v.vA;o.disableClose=!0,o.id="consulta-download",o.width="800px",o.data=t,this.DownLoadDialog.open(x.G,o).beforeClosed().subscribe(m=>{})}NoValidtouchedOrDirty(t){var o,r,m;return!((null===(o=this.parametros.get(t))||void 0===o?void 0:o.valid)||!(null===(r=this.parametros.get(t))||void 0===r?void 0:r.touched)&&!(null===(m=this.parametros.get(t))||void 0===m?void 0:m.dirty))}getMensafield(t){var o,r;return null===(r=null===(o=this.parametros.get(t))||void 0===o?void 0:o.errors)||void 0===r?void 0:r.message}onHoje(t){if(t.checked){let o=new Date(Date.now()).toLocaleString().split(",")[0];this.parametros.patchValue({dtinicial:o,dtfinal:o,hoje:!1}),this.onChangeParametros()}}onLimpar(t){t.checked&&this.parametros.patchValue({dtinicial:"",dtfinal:"",cleardate:!1}),this.onChangeParametros()}}return i.\u0275fac=function(t){return new(t||i)(a.Y36(g.qu),a.Y36(n.U),a.Y36(P.n),a.Y36(I.u),a.Y36(L.j),a.Y36(C.W),a.Y36(v.uw),a.Y36(v.uw))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-filtro-cadastro-padrao"]],inputs:{paramName:["PARAMNAME","paramName"],retorno:["RETORNO","retorno"],email:["EMAIL","email"],download:["DOWNLOAD","download"],controle_paginas:["CONTROLE_PAGINAS","controle_paginas"],hide:["HIDE","hide"]},outputs:{change:"changeParametro",changeHide:"changeHide"},decls:12,vars:3,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Salvar Par\xe2metros","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Enviar Consulta Por E-Mail","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Baixar A Consulta","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Mostrar/Esconder","matTooltipPosition","above",3,"click"],["autocomplete","off",3,"formGroup",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Enviar Consulta Por E-Mail","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Baixar A Consulta","matTooltipPosition","above",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-2"],["field","","appearance","outline",1,"col-max"],["formControlName","orderby",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"col-max"],["matInput","","formControlName","codigo"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"col-med-1"],["matInput","","formControlName","descricao",1,"uppercase"],[3,"value"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,o){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"span",1),a._uU(2,"Filtro Da Pesquisa"),a.qZA(),a.TgZ(3,"button",2),a.NdJ("click",function(){return o.onSaveConfig()}),a.TgZ(4,"mat-icon"),a._uU(5,"brightness_high"),a.qZA(),a.qZA(),a.YNc(6,J,3,0,"button",3),a.YNc(7,B,3,0,"button",4),a.TgZ(8,"button",5),a.NdJ("click",function(){return o.onHide()}),a.TgZ(9,"mat-icon"),a._uU(10,"remove_red_eye"),a.qZA(),a.qZA(),a.qZA(),a.YNc(11,k,24,5,"form",6)),2&t&&(a.xp6(6),a.Q6J("ngIf",o.email),a.xp6(1),a.Q6J("ngIf",o.download),a.xp6(4),a.Q6J("ngIf",!o.hide))},directives:[U.lW,y.gM,R.Hw,d.O5,g._Y,g.JL,g.sg,Z.KE,Z.hX,w.gD,g.JJ,g.u,d.sg,V.Nt,g.Fj,H.ey,Z.R9],styles:[".ckeck[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}.check-margem[_ngcontent-%COMP%]{margin:0 10px}"]}),i})();function W(i,l){if(1&i){const t=a.EpF();a.TgZ(0,"app-filtro-cadastro-padrao",1),a.NdJ("changeParametro",function(r){return a.CHM(t),a.oxw().onChangeParametros(r)})("changeHide",function(r){return a.CHM(t),a.oxw().onChangeHide(r)}),a.qZA()}if(2&i){const t=a.oxw();a.Q6J("HIDE",t.hide)("EMAIL",!0)("DOWNLOAD",!0)("CONTROLE_PAGINAS",t.controlePaginas)}}const z=[{path:"",redirectTo:"cadastro_padrao",pathMatch:"full"},{path:"cadastro_padrao",component:(()=>{class i{constructor(t,o,r,m,c){this.globalService=t,this.localStorageService=o,this.router=r,this.appSnackBar=m,this.route=c,this.retorno=!1,this.parametro=new s.M,this.tamPagina=50,this.controlePaginas=new u.e(this.tamPagina,this.tamPagina),this.browse=!0,this.idAcao=f.I.Consulta,this.hide=!1,this.targetRowId=0,this.paramName="paramimoinv"}ngOnInit(){}onChangeParametros(t){console.log("change chamdo",t),this.parametro=t;let o=1;var r=this.localStorageService.getNumber("page");console.log("page:",r),null!=r&&(o=r),this.controlePaginas.setPaginaAtual(o),this.localStorageService.removeItem("page")}onChangeHide(t){this.hide=t}}return i.\u0275fac=function(t){return new(t||i)(a.Y36(n.U),a.Y36(P.n),a.Y36(h.F0),a.Y36(C.W),a.Y36(h.gz))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-crud-padrao-cadastro"]],decls:3,vars:1,consts:[["PARAMNAME","paramapelido",3,"HIDE","EMAIL","DOWNLOAD","CONTROLE_PAGINAS","changeParametro","changeHide",4,"ngIf"],["PARAMNAME","paramapelido",3,"HIDE","EMAIL","DOWNLOAD","CONTROLE_PAGINAS","changeParametro","changeHide"]],template:function(t,o){1&t&&(a.TgZ(0,"p"),a._uU(1,"crud-padrao-cadastro works!"),a.qZA(),a.YNc(2,W,1,4,"app-filtro-cadastro-padrao",0)),2&t&&(a.xp6(2),a.Q6J("ngIf",o.browse))},directives:[d.O5,Q],styles:[""]}),i})()}];let K=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[h.Bz.forChild(z)],h.Bz]}),i})();var X=e(4307),q=e(9243),aa=e(4466),ta=e(8981);let oa=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[d.ez,K,X.q,q.Cl,g.u5,g.UX,aa.m,ta.yI.forChild()]]}),i})()},5062:(_,p,e)=>{e.d(p,{E:()=>d});class d{constructor(){this.id_empresa=0,this.modulo="",this.assinatura="",this.id_usuario=0,this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}},5626:(_,p,e)=>{e.d(p,{u:()=>f});var d=e(2340),h=e(7716),s=e(1841);let f=(()=>{class u{constructor(n){this.http=n,this.apiURL=d.N.apiURL}getParametros(){return this.http.get(`${this.apiURL}parametros`)}getParametrosParametro01(n){return this.http.post(`${this.apiURL}parametros`,n)}getParametro(n,P,C,v){return this.http.get(`${this.apiURL}parametro/${n}/${P}/${C}/${v}`)}ParametroInsert(n){return this.http.post(`${this.apiURL}parametro/`,n)}ParametroUpdate(n){return this.http.put(`${this.apiURL}parametro/`,n)}ParametroAtualiza(n){return this.http.post(`${this.apiURL}atualizarparametro/`,n)}ParametroDelete(n,P,C,v){return this.http.delete(`${this.apiURL}parametro/${n}/${P}/${C}/${v}`)}ParametroInstallKey(){return this.http.post(`${this.apiURL}fotokey`,{chave:"nada"})}}return u.\u0275fac=function(n){return new(n||u)(h.LFG(s.eN))},u.\u0275prov=h.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},3430:(_,p,e)=>{e.d(p,{e:()=>d});class d{constructor(s,f){this.tamPagina=s,this.totalRegistros=f,this.paginaInicial=1,this.paginaFinal=1,this.totalPaginas=1,this.setTamPagina(this.tamPagina),this.paginaAtual=1}goFirst(){return this.paginaAtual=this.paginaInicial,this.paginaAtual}goLast(){return this.paginaAtual=this.paginaFinal,this.paginaAtual}nextPage(){this.paginaAtual++,this.paginaAtual>this.paginaFinal&&(this.paginaAtual=this.paginaFinal)}forwardPage(){this.paginaAtual--,this.paginaAtual<1&&(this.paginaAtual=1)}getPaginalAtual(){return this.paginaAtual}getTotalPaginas(){return this.totalPaginas}setTamPagina(s){this.tamPagina=s,this.totalPaginas=this.totalRegistros%this.tamPagina==0?Math.trunc(this.totalRegistros/this.tamPagina):Math.trunc(this.totalRegistros/this.tamPagina)+1,this.paginaFinal=this.totalPaginas}setPaginaAtual(s){this.paginaAtual=s}start(){this.paginaInicial=1,this.paginaFinal=1,this.totalPaginas=1,this.paginaAtual=1}}}}]);