"use strict";(self.webpackChunkinventario=self.webpackChunkinventario||[]).push([[215],{3215:(oo,g,e)=>{e.r(g),e.d(g,{AnexarProdutosModule:()=>X});var m=e(8583),p=e(4655),f=e(8569),h=e(1878),v=e(4576),A=e(4372),Z=e(3010),S=e(6825),c=e(6809),b=e(9134),T=e(1543);class C{constructor(){this.id_empresa=0,this.id_filial=0,this.id_inventario=0}}var o=e(7716),P=e(3317),l=e(3679),I=e(8913),_=e(5298),O=e(9297),N=e(5884),J=e(6288),U=e(789),y=e(2522),E=e(1095),F=e(1436),B=e(6627),x=e(8295),z=e(7441),Y=e(2458),M=e(9983);function L(i,n){if(1&i&&(o.TgZ(0,"mat-option",14),o._uU(1),o.qZA()),2&i){const t=n.$implicit;o.Q6J("value",t.id),o.xp6(1),o.hij(" ",t.razao," ")}}function Q(i,n){if(1&i&&(o.TgZ(0,"mat-option",14),o._uU(1),o.qZA()),2&i){const t=n.$implicit;o.Q6J("value",t.id),o.xp6(1),o.hij(" ",t.razao," ")}}function V(i,n){if(1&i&&(o.TgZ(0,"mat-option",14),o._uU(1),o.qZA()),2&i){const t=n.$implicit;o.Q6J("value",t.codigo),o.xp6(1),o.hij(" ",t.descricao," ")}}function q(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).onProcessar()}),o.TgZ(1,"mat-icon"),o._uU(2,"check"),o.qZA(),o._uU(3," Processar "),o.qZA()}}function G(i,n){if(1&i){const t=o.EpF();o.TgZ(0,"div",3),o.TgZ(1,"form",15),o.TgZ(2,"div",16),o.TgZ(3,"mat-form-field",17),o.TgZ(4,"mat-label"),o._uU(5,"TOTAL DE PRODUTOS"),o.qZA(),o._UZ(6,"input",18),o.qZA(),o.TgZ(7,"mat-form-field",17),o.TgZ(8,"mat-label"),o._uU(9,"TOTAL DE PRODUTOS ANEXADOS"),o.qZA(),o._UZ(10,"input",19),o.qZA(),o.TgZ(11,"mat-form-field",17),o.TgZ(12,"mat-label"),o._uU(13,"TOTAL DE PRODUTOS A ANEXAR"),o.qZA(),o._UZ(14,"input",20),o.qZA(),o.qZA(),o.qZA(),o.TgZ(15,"div",11),o.YNc(16,q,4,0,"button",21),o.TgZ(17,"button",22),o.NdJ("click",function(){return o.CHM(t),o.oxw().onCancelar()}),o.TgZ(18,"mat-icon"),o._uU(19,"cancel"),o.qZA(),o._uU(20," Cancelar "),o.qZA(),o.qZA(),o.qZA()}if(2&i){const t=o.oxw();o.xp6(1),o.Q6J("formGroup",t.resumo),o.xp6(5),o.Q6J("readonly",!0),o.xp6(4),o.Q6J("readonly",!0),o.xp6(4),o.Q6J("readonly",!0),o.xp6(2),o.Q6J("ngIf",t.anexar)}}const D=[{path:"",redirectTo:"anexar-produtos",pathMatch:"full"},{path:"anexar-produtos",component:(()=>{class i{constructor(t,a,s,r,d,u,H,W,w){this.globalService=t,this.formBuilder=a,this.empresaService=s,this.localService=r,this.inventarioService=d,this.imobilizadoService=u,this.imoInventarioService=H,this.router=W,this.appSnackBar=w,this.empresas=[],this.empresa=new f.Y,this.locais=[],this.local=new v.s,this.inventarios=[],this.inventario=new h.q,this.total_produtos=0,this.total_produtos_anexados=0,this.total_produtos_anexar=0,this.anexar=!1,this.verificado=!1,this.parametros=a.group({empresa:[null],local:[null],inventario:[null]}),this.resumo=a.group({total_produtos:[null],total_produtos_anexados:[null],total_produtos_anexar:[null]})}ngOnInit(){this.setValuesResumo(),this.onGetEmpresas()}ngOnDestroy(){var t,a,s,r,d,u;null===(t=this.inscricaoEmpresas)||void 0===t||t.unsubscribe(),null===(a=this.inscricaoLocais)||void 0===a||a.unsubscribe(),null===(s=this.inscricaoInventarios)||void 0===s||s.unsubscribe(),null===(r=this.inscricaoTotalImobilizados)||void 0===r||r.unsubscribe(),null===(d=this.inscricaoTotalAnexados)||void 0===d||d.unsubscribe(),null===(u=this.inscricaoAnexar)||void 0===u||u.unsubscribe()}onGetEmpresas(){let t=new A.F;t.orderby="C\xf3digo",this.globalService.setSpin(!0),this.inscricaoEmpresas=this.empresaService.getEmpresasParametro_01(t).subscribe(a=>{this.globalService.setSpin(!1),this.empresas=a,this.empresa=this.empresas[0],this.setValues(),this.onGetLocais()},a=>{this.globalService.setSpin(!1),this.empresas=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nas Empresas ${(0,c.bZ)(a)}`,"OK")})}onGetLocais(){let t=new S.X;t.id_empresa=this.empresa.id,t.orderby="C\xf3digo",this.globalService.setSpin(!0),this.inscricaoLocais=this.localService.getLocaisParametro_01(t).subscribe(a=>{this.globalService.setSpin(!1),this.locais=a,this.local=this.locais[0],this.parametros.patchValue({local:this.local.id}),this.onGetInventarios()},a=>{this.globalService.setSpin(!1),this.locais=[],this.local=new v.s,this.inventarios=[],this.inventario=new h.q,this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Locais ${(0,c.bZ)(a)}`,"OK")})}onGetInventarios(){var t,a;let s=new Z.T;s.id_empresa=null===(t=this.parametros.value)||void 0===t?void 0:t.empresa,s.id_filial=null===(a=this.parametros.value)||void 0===a?void 0:a.local,s.orderby="Descri\xe7\xe3o",this.globalService.setSpin(!0),this.inscricaoInventarios=this.inventarioService.getInventariosParametro_01(s).subscribe(r=>{this.globalService.setSpin(!1),this.inventarios=r,this.inventario=r[0],this.parametros.patchValue({inventario:this.inventario.codigo})},r=>{this.globalService.setSpin(!1),this.empresas=[],this.empresa=new f.Y,this.locais=[],this.local=new v.s,this.inventarios=[],this.inventario=new h.q,this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Invent\xe1rios ${(0,c.bZ)(r)}`,"OK")})}getImobilizadosContador(){let t=new b.C;t.id_empresa=this.empresa.id,t.id_filial=this.local.id,t.contador="S",this.globalService.setSpin(!0),this.inscricaoTotalImobilizados=this.imobilizadoService.getImobilizadosParametro_01(t).subscribe(a=>{this.globalService.setSpin(!1),this.total_produtos=a.total,0==this.total_produtos&&this.appSnackBar.openFailureSnackBar("Nunhum Produto Cadatrado!","OK"),this.resumo.patchValue({total_produtos:a.total}),this.getImoIvenContador()},a=>{this.globalService.setSpin(!1),this.total_produtos=0,this.total_produtos_anexados=0,this.total_produtos_anexar=0,this.appSnackBar.openFailureSnackBar("Nunhum Produto Cadatrado!","OK")})}getImoIvenContador(){let t=new T.E;t.id_empresa=this.empresa.id,t.id_filial=this.local.id,t.id_inventario=this.inventario.codigo,t.contador="S",this.globalService.setSpin(!0),this.inscricaoTotalAnexados=this.imoInventarioService.getImobilizadosinventariosParametro_01(t).subscribe(a=>{this.globalService.setSpin(!1),this.total_produtos_anexados=a.total,this.total_produtos_anexar=this.total_produtos-this.total_produtos_anexados,this.resumo.patchValue({total_produtos_anexados:this.total_produtos_anexados,total_produtos_anexar:this.total_produtos_anexar}),this.anexar=this.total_produtos_anexar>0,this.verificado=!0},a=>{this.globalService.setSpin(!1),this.total_produtos_anexados=0,this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Produtos De Invent\xe1rio ${(0,c.bZ)(a)}`,"OK")})}anexarProdutoInventario(){let t=new C;t.id_empresa=this.empresa.id,t.id_filial=this.local.id,t.id_inventario=this.inventario.codigo,this.globalService.setSpin(!0),this.inscricaoAnexar=this.imoInventarioService.anexarProdutoInventario(t).subscribe(a=>{this.globalService.setSpin(!1),this.verificado=!1,this.anexar=!1,this.appSnackBar.openSuccessSnackBar("Produtos Anexados Com Sucesso!","OK")},a=>{this.globalService.setSpin(!1),this.total_produtos_anexados=0,this.appSnackBar.openFailureSnackBar(`Falha Ao Anexar Produtos No Invent\xe1rio ${(0,c.bZ)(a)}`,"OK")})}setValues(){this.parametros.setValue({empresa:this.empresa.id,local:this.local.id,inventario:this.inventario.codigo})}setValuesResumo(){this.resumo.setValue({total_produtos:this.total_produtos,total_produtos_anexados:this.total_produtos_anexados,total_produtos_anexar:this.total_produtos_anexar})}onHome(){this.router.navigate([""])}onChangeEmpresa(){this.onGetLocais()}onChangeLocal(){let t=this.locais.findIndex(a=>{var s;return a.id===(null===(s=this.parametros.value)||void 0===s?void 0:s.local)});t>=0&&(this.local=this.locais[t],this.onGetInventarios())}onValidar(){this.getImobilizadosContador()}onProcessar(){this.anexarProdutoInventario()}onCancelar(){this.verificado=!1,this.anexar=!1}}return i.\u0275fac=function(t){return new(t||i)(o.Y36(P.U),o.Y36(l.qu),o.Y36(I.P),o.Y36(_.C),o.Y36(O.I),o.Y36(N.i),o.Y36(J.J),o.Y36(p.F0),o.Y36(U.W))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-anexar-produtos"]],decls:28,vars:5,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Retorno","matTooltipPosition","above",3,"click"],[1,"parametros","box"],["autocomplete","off",1,"col-med-4",3,"formGroup"],["field","","appearance","outline",1,"col-max"],["formControlName","empresa",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","local",3,"selectionChange"],["field","","appearance","outline",1,"column-span-2"],["formControlName","inventario"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click"],["class","parametros box",4,"ngIf"],[3,"value"],["autocomplete","off",3,"formGroup"],[1,"col-med-3"],["appearance","outline",1,"col-max"],["matInput","","formControlName","total_produtos",3,"readonly"],["matInput","","formControlName","total_produtos_anexados",3,"readonly"],["matInput","","formControlName","total_produtos_anexar",3,"readonly"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,a){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-toolbar"),o.TgZ(2,"span",1),o._uU(3,"Anexar Produtos Ao Invent\xe1rio:"),o.qZA(),o.TgZ(4,"button",2),o.NdJ("click",function(){return a.onHome()}),o.TgZ(5,"mat-icon"),o._uU(6,"home"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"div",3),o.TgZ(8,"form",4),o.TgZ(9,"mat-form-field",5),o.TgZ(10,"mat-label"),o._uU(11,"Empresa"),o.qZA(),o.TgZ(12,"mat-select",6),o.NdJ("selectionChange",function(){return a.onChangeEmpresa()}),o.YNc(13,L,2,2,"mat-option",7),o.qZA(),o.qZA(),o.TgZ(14,"mat-form-field",5),o.TgZ(15,"mat-label"),o._uU(16,"Local"),o.qZA(),o.TgZ(17,"mat-select",8),o.NdJ("selectionChange",function(){return a.onChangeLocal()}),o.YNc(18,Q,2,2,"mat-option",7),o.qZA(),o.qZA(),o.TgZ(19,"mat-form-field",9),o.TgZ(20,"mat-label"),o._uU(21,"Invent\xe1rio"),o.qZA(),o.TgZ(22,"mat-select",10),o.YNc(23,V,2,2,"mat-option",7),o.qZA(),o.qZA(),o.qZA(),o.TgZ(24,"div",11),o.TgZ(25,"button",12),o.NdJ("click",function(){return a.onValidar()}),o._uU(26," Verificar "),o.qZA(),o.qZA(),o.qZA(),o.YNc(27,G,21,5,"div",13)),2&t&&(o.xp6(8),o.Q6J("formGroup",a.parametros),o.xp6(5),o.Q6J("ngForOf",a.empresas),o.xp6(5),o.Q6J("ngForOf",a.locais),o.xp6(5),o.Q6J("ngForOf",a.inventarios),o.xp6(4),o.Q6J("ngIf",a.verificado))},directives:[y.Ye,E.lW,F.gM,B.Hw,l._Y,l.JL,l.sg,x.KE,x.hX,z.gD,l.JJ,l.u,m.sg,m.O5,Y.ey,M.Nt,l.Fj],styles:[".coluna-cabec-gerador[_ngcontent-%COMP%]{background-color:#acb0b8;text-align:left;height:max-content}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2aa}tr[_ngcontent-%COMP%]:hover{background-color:#caa99d}.parametros[_ngcontent-%COMP%]{padding:10px;font-size:medium;color:#000}"]}),i})()}];let R=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[p.Bz.forChild(D)],p.Bz]}),i})();var K=e(3436),$=e(9243),j=e(4466),k=e(7325);let X=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[m.ez,R,K.q,$.Cl,l.u5,l.UX,j.m,k.yI.forChild()]]}),i})()}}]);