"use strict";(self.webpackChunkinventario=self.webpackChunkinventario||[]).push([[649],{4649:(k,g,i)=>{i.r(g),i.d(g,{ApontamentoModule:()=>Y});var v=i(8583),u=i(4655),c=i(9243),h=i(2653);class f{constructor(){this.id_empresa=0,this.id_filial=0,this.id_lanca=0,this.id_inventario=0,this.id_imobilizado=0,this.id_usuario=0,this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}var Z=i(5062),C=i(3032),d=i(3430),s=i(6809),t=i(7716),m=i(3679),T=i(3317),S=i(6081),O=i(5626),_=i(789),I=i(2522),N=i(3968),q=i(1095),j=i(1436),y=i(6627),A=i(8295),x=i(7441),J=i(9983),F=i(2458),U=i(7234);function E(r,l){if(1&r&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&r){const a=l.$implicit;t.Q6J("value",a),t.xp6(1),t.hij(" ",a," ")}}function z(r,l){if(1&r&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&r){const a=l.$implicit;t.Q6J("value",a),t.xp6(1),t.hij(" ",a," ")}}function R(r,l){if(1&r){const a=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"div"),t.TgZ(3,"mat-label",19),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"div"),t.TgZ(7,"mat-label",19),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"td"),t.TgZ(10,"div"),t.TgZ(11,"mat-label",19),t._uU(12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"td",20),t.TgZ(14,"barra-acoes",21),t.NdJ("changeOpcao",function(e){const p=t.CHM(a).$implicit;return t.oxw().escolha(e,p)}),t.qZA(),t.qZA(),t.qZA()}if(2&r){const a=l.$implicit;t.xp6(4),t.Oqu(a.nro),t.xp6(4),t.Oqu(a.id_inventario),t.xp6(4),t.Oqu(a.id_imobilizado),t.xp6(2),t.Q6J("BARRA_VERTICAL",!0)("BARRA_ATIVIDADES",!1)("EXCLUIR",!1)}}const B=[{path:"",redirectTo:"apontamentos",pathMatch:"full"},{path:"apontamentos",component:(()=>{class r{constructor(a,o,e,n,p,b,P,Q){this.formBuilder=a,this.globalService=o,this.lancamentoService=e,this.parametrosService=n,this.router=p,this.appSnackBar=b,this.route=P,this.ngZone=Q,this.apontamentos=[],this.erro="",this.opcoesOrdenacao=[],this.opcoesCampo=[],this.tamPagina=50,this.controlePaginas=new d.e(this.tamPagina,0),this.retorno=!1,this.parametro=new h.M,this.parametros=a.group({ordenacao:[null],campo:[null],filtro:[null],grupo:[]}),this.inscricaoRota=P.params.subscribe(G=>{void 0===G.retorno?this.retorno=!1:(this.retorno=!0,this.globalService.estadoFind("apontamento"))}),this.loadParametros()}ngOnInit(){}ngOnDestroy(){var a,o,e,n,p;null===(a=this.inscricaoGetAll)||void 0===a||a.unsubscribe(),null===(o=this.inscricaoGetFiltro)||void 0===o||o.unsubscribe(),null===(e=this.inscricaoGetGrupo)||void 0===e||e.unsubscribe(),null===(n=this.inscricaoRota)||void 0===n||n.unsubscribe(),null===(p=this.inscricaoParametro)||void 0===p||p.unsubscribe()}escolha(a,o){if(void 0!==o){let e=this.parametro.getParametro();Object(e).new=!1,Object(e).id_retorno=o.id_lanca,Object(e).page=this.controlePaginas.getPaginalAtual(),Object(e).op_ordenacao=this.opcoesOrdenacao.findIndex(n=>this.parametros.value.ordenacao==n),Object(e).op_pesquisar=this.opcoesCampo.findIndex(n=>this.parametros.value.campo==n),Object(e).descricao=this.parametros.value.filtro,this.parametro.parametro=JSON.stringify(e),this.globalService.estadoSave(this.parametro),this.router.navigate(["/apontamentos/apontamento",o.id_empresa,o.id_lanca,a])}else{let e=this.parametro.getParametro();Object(e).new=!1,Object(e).id_retorno=0,Object(e).page=this.controlePaginas.getPaginalAtual(),Object(e).op_ordenacao=this.opcoesOrdenacao.findIndex(n=>this.parametros.value.ordenacao==n),Object(e).op_pesquisar=this.opcoesCampo.findIndex(n=>this.parametros.value.campo==n),Object(e).descricao=this.parametros.value.filtro,this.parametro.parametro=JSON.stringify(e),this.globalService.estadoSave(this.parametro),this.router.navigate(["/apontamentos/apontamento",1,0,a])}}getAcoes(){return C.I}setValues(){this.parametros.setValue({ordenacao:this.opcoesOrdenacao[(0,s.P0)(this.parametro.getParametro(),"op_ordenacao")],campo:this.opcoesCampo[(0,s.P0)(this.parametro.getParametro(),"op_pesquisar")],filtro:(0,s.SL)(this.parametro.getParametro(),"descricao"),grupo:1})}getApontamentos(){let a=new f;if(a.id_empresa=this.globalService.getIdEmpresa(),"C\xf3digo"==this.parametros.value.campo){let o=parseInt(this.parametros.value.filtro,10);a.id_lanca=isNaN(o)?0:o}if("Imobilizado"==this.parametros.value.campo){let o=parseInt(this.parametros.value.filtro,10);a.id_imobilizado=isNaN(o)?0:o}a.orderby=this.parametros.value.ordenacao,a.pagina=this.controlePaginas.getPaginalAtual(),a.contador="N",a.tamPagina=this.tamPagina,this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.lancamentoService.getLancamentosParametro_01(a).subscribe(o=>{this.globalService.setSpin(!1),this.apontamentos=[],this.apontamentos=o;const e=this.apontamentos.findIndex(p=>p.id_lanca==(0,s.P0)(this.parametro.getParametro(),"id_retorno"));setTimeout(()=>this.viewPort.scrollToIndex(e),10),this.retorno=!1;let n=this.parametro.getParametro();Object(n).id_retorno=0,Object(n).new=!1,this.parametro.parametro=JSON.stringify(n)},o=>{let e=this.parametro.getParametro();Object(e).id_retorno=0,Object(e).new=!1,this.retorno=!1,this.globalService.setSpin(!1),this.apontamentos=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Apontamentos ${(0,s.bZ)(o)}`,"OK")})}getApontamentosContador(){let a=new f;if(a.id_empresa=this.globalService.getIdEmpresa(),"C\xf3digo"==this.parametros.value.campo){let o=parseInt(this.parametros.value.filtro,10);a.id_lanca=isNaN(o)?0:o}if("Imobilizado"==this.parametros.value.campo){let o=parseInt(this.parametros.value.filtro,10);a.id_imobilizado=isNaN(o)?0:o}a.orderby=this.parametros.value.ordenacao,a.contador="S",a.tamPagina=this.tamPagina,this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.lancamentoService.getLancamentosParametro_01(a).subscribe(o=>{if(this.globalService.setSpin(!1),this.controlePaginas=new d.e(this.tamPagina,0==o.total?1:o.total),this.retorno)if((0,s.xc)(this.parametro.getParametro(),"new"))this.controlePaginas.goLast();else{let e=this.parametro.getParametro();this.controlePaginas.setPaginaAtual(Object(e).page)}this.getApontamentos()},o=>{this.globalService.setSpin(!1),this.controlePaginas=new d.e(this.tamPagina,0),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Locais ${(0,s.bZ)(o)}`,"OK")})}getTexto(){return s.fd}onChangePage(){this.getApontamentos()}onChangeParametros(){this.getApontamentosContador()}onHome(){this.router.navigate([""])}onSaveConfig(){this.updateParametros()}loadParametros(){if(this.parametro=new h.M,this.parametro.id_empresa=this.globalService.getIdEmpresa(),this.parametro.modulo="apontamento",this.parametro.assinatura="V1.00 26/08/23",this.parametro.id_usuario=this.globalService.usuario.id,this.parametro.parametro='\n       {\n         "op_ordenacao": 0,\n         "ordenacao": ["Nro", "Inventario",Imobilizado],\n         "op_pesquisar": 2,\n         "pesquisar": ["Nro", "Inventario",Imobilizado],\n         "descricao": "",\n         "page": 1,\n         "new": false,\n         "id_retorno":0\n       }',this.opcoesOrdenacao=(0,s.FO)(this.parametro.getParametro(),"ordenacao"),this.opcoesCampo=(0,s.FO)(this.parametro.getParametro(),"pesquisar"),this.retorno&&null!==this.globalService.estadoFind("apontamento")){const a=this.globalService.estadoFind("apontamento");if(null!=a){if((0,s.xc)(a.getParametro(),"new")){let o=this.parametro.getParametro();Object(o).id_retorno=(0,s.P0)(a.getParametro(),"id_retorno"),this.parametro.parametro=JSON.stringify(o),this.setPosicaoInclusao()}else this.controlePaginas.setPaginaAtual((0,s.P0)(a.getParametro(),"page")),this.parametro.setParametro(a.getParametro());this.globalService.estadoDelete(a),this.setValues(),this.getApontamentosContador()}}else this.getParametro()}setPosicaoInclusao(){const a=this.parametro.getParametro();Object(a).op_ordenacao=0,Object(a).op_pesquisar=0,Object(a).descricao="",Object(a).new=!0,this.parametro.setParametro(a)}getParametro(){this.globalService.setSpin(!0);let a=new Z.E;a.id_empresa=this.parametro.id_empresa,a.modulo=this.parametro.modulo,a.assinatura=this.parametro.assinatura,a.id_usuario=this.parametro.id_usuario,a.orderby="Usu\xe1rio",this.inscricaoParametro=this.parametrosService.getParametrosParametro01(a).subscribe(o=>{this.globalService.setSpin(!1),this.parametro=new h.M,this.parametro.id_empresa=o[0].id_empresa,this.parametro.modulo=o[0].modulo,this.parametro.id_usuario=o[0].id_usuario,this.parametro.assinatura=o[0].assinatura,this.parametro.parametro=o[0].parametro,this.parametro.user_insert=o[0].user_insert,this.parametro.user_update=o[0].user_update,this.opcoesOrdenacao=(0,s.FO)(this.parametro.getParametro(),"ordenacao"),this.opcoesCampo=(0,s.FO)(this.parametro.getParametro(),"pesquisar"),this.setValues(),this.getApontamentosContador()},o=>{this.globalService.setSpin(!1),this.setValues(),this.getApontamentosContador()})}updateParametros(){this.globalService.setSpin(!0),this.parametro.user_insert=this.globalService.usuario.id,this.parametro.user_update=this.globalService.usuario.id;let a=this.parametro.getParametro();Object(a).op_ordenacao=this.opcoesOrdenacao.findIndex(o=>this.parametros.value.ordenacao==o),Object(a).op_pesquisar=this.opcoesCampo.findIndex(o=>this.parametros.value.campo==o),Object(a).descricao=this.parametros.value.filtro,Object(a).page=0,Object(a).new=!1,this.parametro.parametro=JSON.stringify(a),this.inscricaoParametro=this.parametrosService.ParametroAtualiza(this.parametro).subscribe(o=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar("Par\xe2metros Atualizados","OK")},o=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Grava\xe7\xe3o Dos Parametros ${(0,s.bZ)(o)}`,"OK")})}}return r.\u0275fac=function(a){return new(a||r)(t.Y36(m.qu),t.Y36(T.U),t.Y36(S.l),t.Y36(O.u),t.Y36(u.F0),t.Y36(_.W),t.Y36(u.gz),t.Y36(t.R0b))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-crud-apontamento"]],viewQuery:function(a,o){if(1&a&&t.Gf(c.N7,5),2&a){let e;t.iGM(e=t.CRH())&&(o.viewPort=e.first)}},decls:45,vars:7,consts:[[1,"div-barra"],[1,"example-spacer"],[3,"controle","changePage"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Salvar Par\xe2metros","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Retorno","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above",3,"matTooltip","click"],["autocomplete","off",1,"col-med-4",3,"formGroup"],["field","","appearance","outline",1,"col-max"],["formControlName","ordenacao",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","campo",3,"selectionChange"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","filtro","oninput","this.value = this.value.toUpperCase()"],[1,"content",3,"itemSize"],[1,"Browse_Lanc"],[1,"coluna-cabec"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"value"],[1,"Browse_Lanc_td"],[1,"acoes"],[3,"BARRA_VERTICAL","BARRA_ATIVIDADES","EXCLUIR","changeOpcao"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3,"Apontamentos:"),t.qZA(),t.TgZ(4,"app-navegator",2),t.NdJ("changePage",function(){return o.onChangePage()}),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.getApontamentosContador()}),t.TgZ(6,"mat-icon"),t._uU(7,"rotate_right"),t.qZA(),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return o.onSaveConfig()}),t.TgZ(9,"mat-icon"),t._uU(10,"brightness_high"),t.qZA(),t.qZA(),t.TgZ(11,"button",5),t.NdJ("click",function(){return o.onHome()}),t.TgZ(12,"mat-icon"),t._uU(13,"home"),t.qZA(),t.qZA(),t.TgZ(14,"button",6),t.NdJ("click",function(){return o.escolha(o.getAcoes().Inclusao)}),t.TgZ(15,"mat-icon"),t._uU(16,"add_circle_outline"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div"),t.TgZ(18,"form",7),t.TgZ(19,"mat-form-field",8),t.TgZ(20,"mat-label"),t._uU(21,"Ordena\xe7\xe3o"),t.qZA(),t.TgZ(22,"mat-select",9),t.NdJ("selectionChange",function(){return o.onChangeParametros()}),t.YNc(23,E,2,2,"mat-option",10),t.qZA(),t.qZA(),t.TgZ(24,"mat-form-field",8),t.TgZ(25,"mat-label"),t._uU(26,"Pesquisar Por"),t.qZA(),t.TgZ(27,"mat-select",11),t.NdJ("selectionChange",function(){return o.onChangeParametros()}),t.YNc(28,z,2,2,"mat-option",10),t.qZA(),t.qZA(),t.TgZ(29,"mat-form-field",12),t.TgZ(30,"mat-label"),t._uU(31,"Descri\xe7\xe3o"),t.qZA(),t._UZ(32,"input",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"cdk-virtual-scroll-viewport",14),t.TgZ(34,"table",15),t.TgZ(35,"tr",16),t.TgZ(36,"th"),t._uU(37,"Nro"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"Invent\xe1rio"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"Imobilizado"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"A\xc7\xd5ES"),t.qZA(),t.qZA(),t.YNc(44,R,15,6,"tr",17),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.Q6J("controle",o.controlePaginas),t.xp6(10),t.Q6J("matTooltip",o.getTexto().incluir),t.xp6(4),t.Q6J("formGroup",o.parametros),t.xp6(5),t.Q6J("ngForOf",o.opcoesOrdenacao),t.xp6(5),t.Q6J("ngForOf",o.opcoesCampo),t.xp6(5),t.Q6J("itemSize",50),t.xp6(11),t.Q6J("cdkVirtualForOf",o.apontamentos))},directives:[I.Ye,N.J,q.lW,j.gM,y.Hw,m._Y,m.JL,m.sg,A.KE,A.hX,x.gD,m.JJ,m.u,v.sg,J.Nt,m.Fj,c.N7,c.xd,c.x0,F.ey,U.C],styles:[".content[_ngcontent-%COMP%]{height:60%;overflow:auto}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2aa}tr[_ngcontent-%COMP%]:hover{background-color:#caa99d}"]}),r})()},{path:"apontamento/:id_empresa/:id_local/:acao",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-apontamento-view"]],decls:2,vars:0,template:function(a,o){1&a&&(t.TgZ(0,"p"),t._uU(1,"apontamento-view works!"),t.qZA())},styles:[""]}),r})(),canActivate:[]}];let V=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[u.Bz.forChild(B)],u.Bz]}),r})();var w=i(3436),M=i(4466),L=i(7325);let Y=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[v.ez,V,w.q,c.Cl,m.u5,m.UX,M.m,L.yI.forChild()]]}),r})()}}]);